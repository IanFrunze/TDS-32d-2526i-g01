<!DOCTYPE html>
<html class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>All modules</title>
    <link href="images/logo-icon.svg" rel="icon" type="image/svg">
    <script>var pathToRoot = "";</script>
    <script>document.documentElement.classList.replace("no-js","js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="scripts/sourceset_dependencies.js" async="async"></script>
<link href="styles/style.css" rel="Stylesheet">
<link href="styles/main.css" rel="Stylesheet">
<link href="styles/prism.css" rel="Stylesheet">
<link href="styles/logo-styles.css" rel="Stylesheet">
<link href="styles/font-jb-sans-auto.css" rel="Stylesheet">
<link href="ui-kit/ui-kit.min.css" rel="Stylesheet">
<script type="text/javascript" src="scripts/clipboard.js" async="async"></script>
<script type="text/javascript" src="scripts/navigation-loader.js" async="async"></script>
<script type="text/javascript" src="scripts/platform-content-handler.js" async="async"></script>
<script type="text/javascript" src="scripts/main.js" defer="defer"></script>
<script type="text/javascript" src="scripts/prism.js" async="async"></script>
<script type="text/javascript" src="ui-kit/ui-kit.min.js" defer="defer"></script>
<script type="text/javascript" src="scripts/symbol-parameters-wrapper_deferred.js" defer="defer"></script>
<link href="images/UML_Structure.drawio.png">
</head>
<body>
    <div class="root">
    <nav class="navigation theme-dark" id="navigation-wrapper">
            <a class="library-name--link" href="index.html">
                    Reversi Docs
            </a>
        <button class="navigation-controls--btn navigation-controls--btn_toc ui-kit_mobile-only" id="toc-toggle"
                type="button">Toggle table of contents
        </button>
        <div class="navigation-controls--break ui-kit_mobile-only"></div>
        <div class="library-version" id="library-version">
0.0.1        </div>
        <div class="navigation-controls">
            <button class="navigation-controls--btn navigation-controls--btn_theme" id="theme-toggle-button"
                    type="button">Switch theme
            </button>
            <div class="navigation-controls--btn navigation-controls--btn_search" id="searchBar" role="button">Search in
                API
            </div>
        </div>
    </nav>
        <div id="container">
            <div class="sidebar" id="leftColumn">
                <div class="dropdown theme-dark_mobile" data-role="dropdown" id="toc-dropdown">
                    <ul role="listbox" id="toc-listbox" class="dropdown--list dropdown--list_toc-list"
                        data-role="dropdown-listbox">
                        <div class="dropdown--header">
                            <span>
                                    Reversi Docs
                            </span>
                            <button class="button" data-role="dropdown-toggle" aria-label="Close table of contents">
                                <i class="ui-kit-icon ui-kit-icon_cross"></i>
                            </button>
                        </div>
                        <div class="sidebar--inner" id="sideMenu"></div>
                    </ul>
                    <div class="dropdown--overlay"></div>
                </div>
            </div>
            <div id="main">
<div class="main-content" id="content" pageIds="Reversi Docs::.ext/allModules///PointingToDeclaration//0">
  <div class="breadcrumbs"></div>
  <div class="cover ">
    <div class="cover ">
      <h1 class="">Reversi (Othello) Kotlin Implementation</h1>
      <p class="paragraph">A modular, test-friendly implementation of the Reversi board game written in Kotlin (JVM). The project emphasizes clean separation of concerns, explicit domain modeling, and pluggable persistence.</p>
      <h2 class="">Contents</h2>
      <ul>
        <li>
          <p class="paragraph">Core immutable board & piece model</p>
        </li>
        <li>
          <p class="paragraph">Game abstraction (players, logic extension points)</p>
        </li>
        <li>
          <p class="paragraph">Local filesystem persistence (text format) via <code class="lang-kotlin">LocalGDA</code></p>
        </li>
        <li>
          <p class="paragraph">CLI shell with commands (start, join, move, pass, help, quit)</p>
        </li>
        <li>
          <p class="paragraph">Structured result codes for persistence feedback</p>
        </li>
        <li>
          <p class="paragraph">Unit tests (board and data access layer)</p>
        </li>
        <li>
          <p class="paragraph">Generated documentation (Dokka) with curated package overviews</p>
        </li>
      </ul>
      <h2 class="">Project Structure</h2>
      <p class="paragraph"><img alt="Project Structure" src="images/UML_Structure.drawio.png"></p>
      <h2 class="">Quick Start</h2>
      <div class="sample-container">
        <pre><code class="block lang-bash" theme="idea"># Build (includes fat JAR and docs)<br>./gradlew build<br><br># Run (fat jar contains dependencies)<br>java -jar build/libs/Reversi-0.0.1-all.jar --cli</code></pre>
<span class="top-right-position"><span class="copy-icon"></span>
          <div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div>
        </span></div>
      <p class="paragraph">On Windows (cmd):</p>
      <div class="sample-container">
        <pre><code class="block lang-cmd" theme="idea">gradlew.bat build<br>java -jar build\libs\Reversi-0.0.1-all.jar</code></pre>
<span class="top-right-position"><span class="copy-icon"></span>
          <div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div>
        </span></div>
      <h2 class="">Architecture Overview</h2>
      <table>
        <thead>
          <tr>
            <th>Package</th>
            <th>Responsibility</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code class="org.jetbrains.dokka.pages.commenttable@73cef519 lang-kotlin">pt.isel.reversi.core.board</code></td>
            <td>Board, coordinates, piece types & safe transformation operations</td>
          </tr>
          <tr>
            <td><code class="org.jetbrains.dokka.pages.commenttable@73cef519 lang-kotlin">pt.isel.reversi.core.game</code></td>
            <td>Game interfaces, player representation, logic contracts</td>
          </tr>
          <tr>
            <td><code class="org.jetbrains.dokka.pages.commenttable@73cef519 lang-kotlin">pt.isel.reversi.core.game.localgda</code></td>
            <td>Concrete local text-file persistence (<code class="org.jetbrains.dokka.pages.commenttable@73cef519 lang-kotlin">LocalGDA</code>)</td>
          </tr>
          <tr>
            <td><code class="org.jetbrains.dokka.pages.commenttable@73cef519 lang-kotlin">pt.isel.reversi.cli</code></td>
            <td>CLI loop & rendering utilities</td>
          </tr>
          <tr>
            <td><code class="org.jetbrains.dokka.pages.commenttable@73cef519 lang-kotlin">pt.isel.reversi.cli.commands</code></td>
            <td>Discrete command handlers for user actions</td>
          </tr>
        </tbody>
      </table>
      <p class="paragraph"><img alt="Module Structure" src="images/Module_Structure.drawio.png"></p>
      <p class="paragraph">For in-depth narrative descriptions see <code class="lang-kotlin">Module.md</code> (also surfaced in generated Dokka docs).</p>
      <h2 class="">Local Persistence (LocalGDA)</h2>
      <p class="paragraph"><code class="lang-kotlin">LocalGDA</code> stores each game in a single UTF-8 text file with a deterministic, human-readable structure. The file is line-oriented and intentionally simple so it can be inspected and edited by hand if needed.</p>
      <p class="paragraph">Supported line kinds (order is flexible for headers; moves/passes are chronological):</p>
      <div class="sample-container">
        <pre><code class="block lang-kotlin" theme="idea">availablePieces: SYMBOL(|SYMBOL)*    # available piece symbols separated by '|', e.g. &quot;#|@&quot;<br>side: N                              # integer board side (even, e.g. 8)<br>player: SYMBOL points playsLeft      # optional player lines<br>piece: row col SYMBOL                # a played piece; row and col are integers<br>pass: SYMBOL                         # a pass for the player with the given symbol</code></pre>
<span class="top-right-position"><span class="copy-icon"></span>
          <div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div>
        </span></div>
      <p class="paragraph">Key behaviour notes:</p>
      <ul>
        <li>
          <p class="paragraph">postGame has two distinct code paths:</p>
        </li>
        <ol>
          <li>
            <p class="paragraph">New file (or empty file): <code class="lang-kotlin">postGame</code> will create the file and write a full snapshot consisting of        <code class="lang-kotlin">availablePieces</code> followed by <code class="lang-kotlin">side</code> and a serialized snapshot of the current board as <code class="lang-kotlin">piece:</code> lines. Available        pieces are computed by removing the game players' types from the full set of PieceType entries.</p>
          </li>
          <li>
            <p class="paragraph">Existing file: <code class="lang-kotlin">postGame</code> first reads the existing headers using <code class="lang-kotlin">GameFileAccess.readGameInfo</code>. If the persisted        <code class="lang-kotlin">side</code> does not match <code class="lang-kotlin">game.board.side</code> an <code class="lang-kotlin">InvalidGameWriteException</code> is thrown â€” this prevents unintended        corruption. If sides match, the persisted <code class="lang-kotlin">availablePieces</code> header is filtered by the players in the supplied        <code class="lang-kotlin">game</code> and the file is overwritten with the updated snapshot.</p>
          </li>
        </ol>
        <li>
          <p class="paragraph">postPiece and postPass append a single <code class="lang-kotlin">piece:</code> or <code class="lang-kotlin">pass:</code> line respectively. These are intended to be cheap,   append-only operations.</p>
        </li>
        <li>
          <p class="paragraph">getBoard reconstructs the board by reading headers (verifying <code class="lang-kotlin">side</code>) and parsing the chronological <code class="lang-kotlin">piece:</code> lines.   Malformed piece lines will surface as <code class="lang-kotlin">InvalidPieceInFileException</code>.</p>
        </li>
      </ul>
      <p class="paragraph">Exceptions and expected errors (domain-level):</p>
      <ul>
        <li>
          <p class="paragraph"><code class="lang-kotlin">InvalidSideInFileException</code>: thrown when the <code class="lang-kotlin">side:</code> header is missing or not a valid integer. This is specifically   about the <i>side</i> header and should only be used for that purpose.</p>
        </li>
        <li>
          <p class="paragraph"><code class="lang-kotlin">InvalidAvailablePiecesInFileException</code>: thrown when the <code class="lang-kotlin">availablePieces:</code> header is missing or malformed.</p>
        </li>
        <li>
          <p class="paragraph"><code class="lang-kotlin">InvalidPieceInFileException</code>: thrown when a <code class="lang-kotlin">piece:</code> line cannot be parsed (wrong token count, non-integer   coordinates, unknown symbol).</p>
        </li>
        <li>
          <p class="paragraph"><code class="lang-kotlin">InvalidGameWriteException</code>: thrown by <code class="lang-kotlin">LocalGDA.postGame</code> when attempting to overwrite an existing file with an   incompatible game state (for now, a mismatched <code class="lang-kotlin">side</code>).</p>
        </li>
      </ul>
      <p class="paragraph">The data access helpers live in <code class="lang-kotlin">GameFileAccess</code> which contains focused parsing/writing routines and throws the above exceptions in the correct, domain-focused places.</p>
      <h2 class="">Result Handling Philosophy</h2>
      <p class="paragraph">Persistence methods return <code class="lang-kotlin">GDAResult&lt;T&gt;</code> instead of throwing for expected states:</p>
      <div class="sample-container">
        <pre><code class="block lang-kotlin" theme="idea">val r = gda.postPiece(&quot;game.txt&quot;, piece)<br>when (r.code) {<br>    GDACodes.SUCCESS -&gt; println(&quot;Saved: ${r.data}&quot;)<br>    GDACodes.DATA_NOT_FOUND -&gt; println(&quot;Missing file: ${r.message}&quot;)<br>    else -&gt; println(&quot;Issue: ${r.code} -&gt; ${r.message}&quot;)<br>}</code></pre>
<span class="top-right-position"><span class="copy-icon"></span>
          <div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div>
        </span></div>
      <p class="paragraph">This makes the CLI straightforward and enables richer tooling (e.g., colored outputs) without exception noise.</p>
      <h2 class="">Testing</h2>
      <p class="paragraph">Run the test suite:</p>
      <div class="sample-container">
        <pre><code class="block lang-bash" theme="idea">./gradlew test</code></pre>
<span class="top-right-position"><span class="copy-icon"></span>
          <div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div>
        </span></div>
      <p class="paragraph">Board tests validate coordinate & piece placement invariants. Data access tests assert:</p>
      <ul>
        <li>
          <p class="paragraph">Header creation & overwrite (both code paths in <code class="lang-kotlin">postGame</code>)</p>
        </li>
        <li>
          <p class="paragraph">Piece / pass recording</p>
        </li>
        <li>
          <p class="paragraph">Error codes / exceptions for missing files & structural anomalies</p>
        </li>
      </ul>
      <p class="paragraph">Add new tests under <code class="lang-kotlin">src/test/kotlin/</code> following existing minimal assertion style.</p>
      <h2 class="">Extending the Project</h2>
      <table>
        <thead>
          <tr>
            <th>Goal</th>
            <th>Suggested Approach</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Add AI player</td>
            <td>Implement strategy inside a new logic class conforming to <code class="org.jetbrains.dokka.pages.commenttable@73cef519 lang-kotlin">GameLogicImpl</code> (future)</td>
          </tr>
          <tr>
            <td>Remote persistence</td>
            <td>Provide another <code class="org.jetbrains.dokka.pages.commenttable@73cef519 lang-kotlin">GDAImpl</code> (e.g., HTTP or DB) and inject at bootstrap</td>
          </tr>
          <tr>
            <td>Rich CLI feedback</td>
            <td>Leverage <code class="org.jetbrains.dokka.pages.commenttable@73cef519 lang-kotlin">toStringColored()</code> on results; add command output adapters</td>
          </tr>
          <tr>
            <td>GUI / Web UI</td>
            <td>Reuse core & data modules; replace CLI loop with UI event handlers</td>
          </tr>
        </tbody>
      </table>
      <h2 class="">Documentation</h2>
      <p class="paragraph">Generate updated docs:</p>
      <div class="sample-container">
        <pre><code class="block lang-bash" theme="idea">./gradlew dokkaHtml</code></pre>
<span class="top-right-position"><span class="copy-icon"></span>
          <div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div>
        </span></div>
      <p class="paragraph">Output: <code class="lang-kotlin">build/dokka/html/index.html</code></p>
      <h2 class="">Design Principles Recap</h2>
      <ul>
        <li>
          <p class="paragraph">Immutability for domain objects (safer reasoning & potential concurrency)</p>
        </li>
        <li>
          <p class="paragraph">Explicit outcomes over exceptions for predictable domain states</p>
        </li>
        <li>
          <p class="paragraph">Append-only, transparent persistence for easy debugging</p>
        </li>
        <li>
          <p class="paragraph">Dependency injection boundary at game + data access interface layer</p>
        </li>
      </ul>
      <h2 class="">Future Improvements (Backlog Ideas)</h2>
      <ul>
        <li>
          <p class="paragraph">Implement full move legality & flipping logic integration</p>
        </li>
        <li>
          <p class="paragraph">Endgame detection & scoring summary generator</p>
        </li>
        <li>
          <p class="paragraph">Turn order enforcement in a higher-level service</p>
        </li>
        <li>
          <p class="paragraph">Optional timestamp metadata in persistence format</p>
        </li>
        <li>
          <p class="paragraph">Progressive compaction (e.g., periodic board snapshots)</p>
        </li>
      </ul>
      <h2 class="">Contributing</h2>
      <ol>
        <li>
          <p class="paragraph">Fork & branch (<code class="lang-kotlin">feature/description</code>)</p>
        </li>
        <li>
          <p class="paragraph">Add/adjust tests</p>
        </li>
        <li>
          <p class="paragraph">Ensure <code class="lang-kotlin">./gradlew build</code> passes (including Dokka & fat jar)</p>
        </li>
        <li>
          <p class="paragraph">Create PR summarizing motivation & approach</p>
        </li>
      </ol>
      <h2 class="">License</h2>
      <p class="paragraph">Choose and specify a license by placing it in a <code class="lang-kotlin">LICENSE</code> file (currently unspecified).</p>

      <p class="paragraph">Happy hacking! Explore <code class="lang-kotlin">LocalGDA</code> for a clear example of how to integrate alternative persistence layers without touching core game logic.</p>
    </div>
    <h2 class="">All modules:</h2>
    <div class="table"><a data-name="-1833363468%2FMain%2F0" anchor-label="reversi-cli" id="-1833363468%2FMain%2F0" data-filterable-set=""></a>
      <div class="table-row">
        <div class="main-subrow ">
          <div class="w-100"><span class="inline-flex">
              <div><a href="reversi-cli/index.html">reversi-cli</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1833363468%2FMain%2F0"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div><span class="brief-comment">
              <p class="paragraph">This module implements the core domain logic and persistence contracts.</p>
            </span></div>
        </div>
      </div>
<a data-name="2080261359%2FMain%2F0" anchor-label="reversi-core" id="2080261359%2FMain%2F0" data-filterable-set=""></a>
      <div class="table-row">
        <div class="main-subrow ">
          <div class="w-100"><span class="inline-flex">
              <div><a href="reversi-core/index.html">reversi-core</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="2080261359%2FMain%2F0"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div><span class="brief-comment"></span></div>
        </div>
      </div>
<a data-name="-1012541063%2FMain%2F0" anchor-label="reversi-storage" id="-1012541063%2FMain%2F0" data-filterable-set=""></a>
      <div class="table-row">
        <div class="main-subrow ">
          <div class="w-100"><span class="inline-flex">
              <div><a href="reversi-storage/index.html">reversi-storage</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1012541063%2FMain%2F0"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div><span class="brief-comment">
              <p class="paragraph">This module implements the core domain logic and persistence contracts.</p>
            </span></div>
        </div>
      </div>
    </div>
  </div>
</div>
    <div class="footer">
        <a href="#content" id="go-to-top-link" class="footer--button footer--button_go-to-top"></a>
        <span>(c) 2025 ISEL</span>
        <span class="pull-right">
            <span>Generated by </span>
            <a class="footer--link footer--link_external" href="https://github.com/Kotlin/dokka">
                <span>dokka</span>
            </a>
        </span>
    </div>
            </div>
        </div>
    </div>
</body>
</html>